ALERT sp_cpu_usage_85_perc
  IF vm_cpu_perc{exported_job = "vm"} > 85
  FOR 20m
  LABELS {exported_job = "vm"}
  ANNOTATIONS { 
    summary = "SP cpu usage exceeded 85%",
    description = "High cpu usage for VM {{$labels.exported_instance}}  {{$labels.id}} (current value {{$value}})"
  }

ALERT sp_disk_usage_80_perc
  IF vm_disk_usage_perc{exported_job = "vm"} > 80
  FOR 20m
  LABELS {exported_job = "vm"}
  ANNOTATIONS { 
    summary = "SP disk usage exceeded 80%",
    description = "High disk usage for VM {{$labels.exported_instance}}  {{$labels.id}} (current value {{$value}})"
  }
  

ALERT sp_mem_usage_80_perc   
  IF vm_mem_perc{exported_job = "vm"} < 20
  FOR 20m
  LABELS {exported_job = "vm"}
  ANNOTATIONS {
    summary = "SP memory usage exceeded 80%",
    description = "High memory usage for VM {{$labels.exported_instance}}  {{$labels.id}} (current value {{$value}})"
  }


ALERT cnt_cpu_usage_85_perc
  IF cnt_cpu_perc{exported_job = "containers"} > 85
  FOR 20m
  LABELS {exported_job = "containers"}
  ANNOTATIONS {
    summary = "Container CPU usage exceeded 85%",
    description = "High CPU usage for container {{$labels.name}}  {{$labels.id}} (current value {{$value}})"
  }  

ALERT cnt_mem_usage_80_perc
  IF cnt_mem_perc{exported_job = "containers"} > 80
  FOR 20m
  LABELS {exported_job = "containers"}
  ANNOTATIONS {
    summary = "Container memory usage exceeded 80%",
    description = "High memory usage for container {{$labels.name}}  {{$labels.id}} (current value {{$value}})"
  }
